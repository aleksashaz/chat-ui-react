"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.AudioMessageButton = AudioMessageButton;
exports.MuiMessage = MuiMessage;

var _core = require("@material-ui/core");

var _react = _interopRequireDefault(require("react"));

const useStyles = (0, _core.makeStyles)(theme => ({
  audioButton: {
    flex: '1 0 0%',
    display: 'flex',
    flexDirection: 'row',
    border: '0px',
    color: 'rgb(63, 81, 181)',
    margin: '0px 0px 5px 10px',
    height: '20px',
    width: '20px',
    boxShadow: '1px 1px 2px rgba(0,0,0,.3)',
    marginTop: 'auto'
  },
  audioTypography: {
    flex: '0 1 0%',
    display: 'flex',
    flexDirection: 'row'
  }
}));

function AudioMessageButton(props) {
  const styleClass = useStyles();

  if (props.component) {
    return props.component;
  }

  return /*#__PURE__*/_react.default.createElement(_core.Button, {
    className: styleClass.audioButton
  }, "Sound");
}

function MuiMessage({
  id,
  message,
  showDateTime
}) {
  if (message.deletedAt) {
    return /*#__PURE__*/_react.default.createElement("div", {
      id: id
    });
  }

  const dispDate = message.updatedAt ? message.updatedAt : message.createdAt;
  const component = message.audioButtonComponent;
  const audioButtonProps = {
    component
  };

  const playSoundContent = async () => {
    if (message.audio) {
      const sound = new Audio('data:audio/wav;base64,' + message.audio);
      await sound.play();
    }
  };

  const ChatAvator = /*#__PURE__*/_react.default.createElement(_core.Box, {
    minWidth: 0,
    flexShrink: 0,
    ml: message.self ? 1 : 0,
    mr: message.self ? 0 : 1
  }, /*#__PURE__*/_react.default.createElement(_core.Avatar, {
    alt: message.username,
    src: message.avatar
  }));

  const ChatUsername = /*#__PURE__*/_react.default.createElement(_core.Box, {
    maxWidth: "100%",
    mx: 1
  }, /*#__PURE__*/_react.default.createElement(_core.Typography, {
    variant: "body2",
    align: message.self ? 'right' : 'left'
  }, message.username));

  const ChatDate = /*#__PURE__*/_react.default.createElement(_core.Box, {
    maxWidth: "100%",
    mx: 1
  }, /*#__PURE__*/_react.default.createElement(_core.Typography, {
    variant: "body2",
    align: message.self ? 'right' : 'left',
    color: "textSecondary"
  }, dispDate === null || dispDate === void 0 ? void 0 : dispDate.toLocaleTimeString([], {
    hour: '2-digit',
    minute: '2-digit'
  })));

  return /*#__PURE__*/_react.default.createElement(_core.Grow, {
    in: true
  }, /*#__PURE__*/_react.default.createElement(_core.Box, {
    id: id,
    maxWidth: "100%",
    flex: "0 1 auto",
    my: 1,
    pl: message.self ? '20%' : 0,
    pr: message.self ? 0 : '20%',
    display: "flex",
    justifyContent: message.self ? 'flex-end' : 'flex-start',
    style: {
      overflowWrap: 'break-word'
    }
  }, message.avatar && !message.self && ChatAvator, /*#__PURE__*/_react.default.createElement(_core.Box, {
    minWidth: 0,
    display: "flex",
    flexDirection: "column"
  }, message.username && ChatUsername, /*#__PURE__*/_react.default.createElement(_core.Box, {
    maxWidth: "100%",
    py: 1,
    px: 2,
    bgcolor: message.self ? 'primary.main' : 'background.paper',
    color: message.self ? 'primary.contrastText' : 'text.primary',
    borderRadius: 16,
    boxShadow: 2
  }, message.type === 'text' && /*#__PURE__*/_react.default.createElement(_core.Typography, {
    variant: "body1",
    style: {
      whiteSpace: 'pre-wrap'
    }
  }, message.content), message.type === 'text_audio' && /*#__PURE__*/_react.default.createElement("div", {
    style: {
      flex: '0 1 0%',
      display: 'flex',
      flexDirection: 'row'
    }
  }, /*#__PURE__*/_react.default.createElement(_core.Typography, {
    variant: "body1",
    style: {
      overflowWrap: 'break-word',
      whiteSpace: 'pre-wrap'
    }
  }, message.content), /*#__PURE__*/_react.default.createElement("div", {
    onClick: playSoundContent
  }, /*#__PURE__*/_react.default.createElement(AudioMessageButton, audioButtonProps))), message.type === 'jsx' && /*#__PURE__*/_react.default.createElement("div", null, message.content)), showDateTime && ChatDate), message.avatar && message.self && ChatAvator));
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9tdWkvTXVpTWVzc2FnZS50c3giXSwibmFtZXMiOlsidXNlU3R5bGVzIiwidGhlbWUiLCJhdWRpb0J1dHRvbiIsImZsZXgiLCJkaXNwbGF5IiwiZmxleERpcmVjdGlvbiIsImJvcmRlciIsImNvbG9yIiwibWFyZ2luIiwiaGVpZ2h0Iiwid2lkdGgiLCJib3hTaGFkb3ciLCJtYXJnaW5Ub3AiLCJhdWRpb1R5cG9ncmFwaHkiLCJBdWRpb01lc3NhZ2VCdXR0b24iLCJwcm9wcyIsInN0eWxlQ2xhc3MiLCJjb21wb25lbnQiLCJNdWlNZXNzYWdlIiwiaWQiLCJtZXNzYWdlIiwic2hvd0RhdGVUaW1lIiwiZGVsZXRlZEF0IiwiZGlzcERhdGUiLCJ1cGRhdGVkQXQiLCJjcmVhdGVkQXQiLCJhdWRpb0J1dHRvbkNvbXBvbmVudCIsImF1ZGlvQnV0dG9uUHJvcHMiLCJwbGF5U291bmRDb250ZW50IiwiYXVkaW8iLCJzb3VuZCIsIkF1ZGlvIiwicGxheSIsIkNoYXRBdmF0b3IiLCJzZWxmIiwidXNlcm5hbWUiLCJhdmF0YXIiLCJDaGF0VXNlcm5hbWUiLCJDaGF0RGF0ZSIsInRvTG9jYWxlVGltZVN0cmluZyIsImhvdXIiLCJtaW51dGUiLCJvdmVyZmxvd1dyYXAiLCJ0eXBlIiwid2hpdGVTcGFjZSIsImNvbnRlbnQiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFJQSxNQUFNQSxTQUFTLEdBQUcsc0JBQVlDLEtBQUQsS0FBbUI7QUFDOUNDLEVBQUFBLFdBQVcsRUFBRTtBQUNYQyxJQUFBQSxJQUFJLEVBQUUsUUFESztBQUVYQyxJQUFBQSxPQUFPLEVBQUUsTUFGRTtBQUdYQyxJQUFBQSxhQUFhLEVBQUUsS0FISjtBQUlYQyxJQUFBQSxNQUFNLEVBQUUsS0FKRztBQUtYQyxJQUFBQSxLQUFLLEVBQUUsa0JBTEk7QUFNWEMsSUFBQUEsTUFBTSxFQUFFLGtCQU5HO0FBT1hDLElBQUFBLE1BQU0sRUFBRSxNQVBHO0FBUVhDLElB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QUFFO0FBUGIsS0FTR2QsT0FBTyxDQUFDdUIsSUFBUixLQUFpQixNQUFqQixpQkFDQyw2QkFBQyxnQkFBRDtBQUFZLElBQUEsT0FBTyxFQUFDLE9BQXBCO0FBQTRCLElBQUEsS0FBSyxFQUFFO0FBQUVDLE1BQUFBLFVBQVUsRUFBRTtBQUFkO0FBQW5DLEtBQ0d4QixPQUFPLENBQUN5QixPQURYLENBVkosRUFjR3pCLE9BQU8sQ0FBQ3VCLElBQVIsS0FBaUIsWUFBakIsaUJBQ0M7QUFBSyxJQUFBLEtBQUssRUFBRTtBQUFDeEMsTUFBQUEsSUFBSSxFQUFFLFFBQVA7QUFBaUJDLE1BQUFBLE9BQU8sRUFBRSxNQUExQjtBQUFrQ0MsTUFBQUEsYUFBYSxFQUFFO0FBQWpEO0FBQVosa0JBQ0UsNkJBQUMsZ0JBQUQ7QUFDRSxJQUFBLE9BQU8sRUFBQyxPQURWO0FBRUUsSUFBQSxLQUFLLEVBQUU7QUFBRXFDLE1BQUFBLFlBQVksRUFBRSxZQUFoQjtBQUE4QkUsTUFBQUEsVUFBVSxFQUFFO0FBQTFDO0FBRlQsS0FHS3hCLE9BQU8sQ0FBQ3lCLE9BSGIsQ0FERixlQU1FO0FBQUssSUFBQSxPQUFPLEVBQUVqQjtBQUFkLGtCQUNFLDZCQUFDLGtCQUFELEVBQXdCRCxnQkFBeEIsQ0FERixDQU5GLENBZkosRUEwQkdQLE9BQU8sQ0FBQ3VCLElBQVIsS0FBaUIsS0FBakIsaUJBQTBCLDBDQUFNdkIsT0FBTyxDQUFDeUIsT0FBZCxDQTFCN0IsQ0FGRixFQThCR3hCLFlBQVksSUFBSWlCLFFBOUJuQixDQVpGLEVBNENHbEIsT0FBTyxDQUFDZ0IsTUFBUixJQUFrQmhCLE9BQU8sQ0FBQ2MsSUFBMUIsSUFBa0NELFVBNUNyQyxDQURGLENBREY7QUFrREQiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBdmF0YXIsIEJveCwgR3JvdywgVHlwb2dyYXBoeSwgQnV0dG9uLCBUaGVtZSwgbWFrZVN0eWxlcyB9IGZyb20gJ0BtYXRlcmlhbC11aS9jb3JlJztcbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5cbmltcG9ydCB7IE1lc3NhZ2UsIE1lc3NhZ2VDb250ZW50IH0gZnJvbSAnLi4vY2hhdC10eXBlcyc7XG5cbmNvbnN0IHVzZVN0eWxlcyA9IG1ha2VTdHlsZXMoKHRoZW1lOiBUaGVtZSkgPT4gKHtcbiAgYXVkaW9CdXR0b246IHtcbiAgICBmbGV4OiAnMSAwIDAlJyxcbiAgICBkaXNwbGF5OiAnZmxleCcsXG4gICAgZmxleERpcmVjdGlvbjogJ3JvdycsXG4gICAgYm9yZGVyOiAnMHB4JyxcbiAgICBjb2xvcjogJ3JnYig2MywgODEsIDE4MSknLFxuICAgIG1hcmdpbjogJzBweCAwcHggNXB4IDEwcHgnLFxuICAgIGhlaWdodDogJzIwcHgnLFxuICAgIHdpZHRoOiAnMjBweCcsXG4gICAgYm94U2hhZG93OiAnMXB4IDFweCAycHggcmdiYSgwLDAsMCwuMyknLFxuICAgIG1hcmdpblRvcDonYXV0bycsXG4gIH0sXG4gIGF1ZGlvVHlwb2dyYXBoeToge1xuICAgIGZsZXg6ICcwIDEgMCUnLFxuICAgIGRpc3BsYXk6ICdmbGV4JyxcbiAgICBmbGV4RGlyZWN0aW9uOiAncm93J1xuICB9LFxufSkpO1xuXG5leHBvcnQgZnVuY3Rpb24gQXVkaW9NZXNzYWdlQnV0dG9uKHByb3BzOiBhbnkpOiBKU1guRWxlbWVudCB7XG4gIGNvbnN0IHN0eWxlQ2xhc3MgPSB1c2VTdHlsZXMoKTtcbiAgaWYgKHByb3BzLmNvbXBvbmVudCkge1xuICAgIHJldHVybiBwcm9wcy5jb21wb25lbnQ7XG4gIH1cbiAgcmV0dXJuIDxCdXR0b25cbiAgY2xhc3NOYW1lPSB7c3R5bGVDbGFzcy5hdWRpb0J1dHRvbn1cbiAgPlNvdW5kPC9CdXR0b24+XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBNdWlNZXNzYWdlKHtcbiAgaWQsXG4gIG1lc3NhZ2UsXG4gIHNob3dEYXRlVGltZSxcbn06IHtcbiAgaWQ6IHN0cmluZztcbiAgbWVzc2FnZTogTWVzc2FnZTxNZXNzYWdlQ29udGVudD47XG4gIHNob3dEYXRlVGltZTogYm9vbGVhbjtcbn0pOiBSZWFjdC5SZWFjdEVsZW1lbnQge1xuICBpZiAobWVzc2FnZS5kZWxldGVkQXQpIHtcbiAgICByZXR1cm4gPGRpdiBpZD17aWR9IC8+O1xuICB9XG5cbiAgY29uc3QgZGlzcERhdGUgPSBtZXNzYWdlLnVwZGF0ZWRBdCA/IG1lc3NhZ2UudXBkYXRlZEF0IDogbWVzc2FnZS5jcmVhdGVkQXQ7XG4gIGNvbnN0IGNvbXBvbmVudCA9IG1lc3NhZ2UuYXVkaW9CdXR0b25Db21wb25lbnQ7XG4gIGNvbnN0IGF1ZGlvQnV0dG9uUHJvcHMgPSB7IGNvbXBvbmVudCB9O1xuXG4gIGNvbnN0IHBsYXlTb3VuZENvbnRlbnQgPSBhc3luYyAoKSA9PiB7XG4gICAgaWYgKG1lc3NhZ2UuYXVkaW8pIHtcbiAgICAgICAgY29uc3Qgc291bmQgPSBuZXcgQXVkaW8oJ2RhdGE6YXVkaW8vd2F2O2Jhc2U2NCwnICsgbWVzc2FnZS5hdWRpbyk7XG4gICAgICAgIGF3YWl0IHNvdW5kLnBsYXkoKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgQ2hhdEF2YXRvciA9IChcbiAgICA8Qm94XG4gICAgICBtaW5XaWR0aD17MH1cbiAgICAgIGZsZXhTaHJpbms9ezB9XG4gICAgICBtbD17bWVzc2FnZS5zZWxmID8gMSA6IDB9XG4gICAgICBtcj17bWVzc2FnZS5zZWxmID8gMCA6IDF9XG4gICAgPlxuICAgICAgPEF2YXRhciBhbHQ9e21lc3NhZ2UudXNlcm5hbWV9IHNyYz17bWVzc2FnZS5hdmF0YXJ9IC8+XG4gICAgPC9Cb3g+XG4gICk7XG5cbiAgY29uc3QgQ2hhdFVzZXJuYW1lID0gKFxuICAgIDxCb3ggbWF4V2lkdGg9XCIxMDAlXCIgbXg9ezF9PlxuICAgICAgPFR5cG9ncmFwaHkgdmFyaWFudD1cImJvZHkyXCIgYWxpZ249e21lc3NhZ2Uuc2VsZiA/ICdyaWdodCcgOiAnbGVmdCd9PlxuICAgICAgICB7bWVzc2FnZS51c2VybmFtZX1cbiAgICAgIDwvVHlwb2dyYXBoeT5cbiAgICA8L0JveD5cbiAgKTtcblxuICBjb25zdCBDaGF0RGF0ZSA9IChcbiAgICA8Qm94IG1heFdpZHRoPVwiMTAwJVwiIG14PXsxfT5cbiAgICAgIDxUeXBvZ3JhcGh5XG4gICAgICAgIHZhcmlhbnQ9XCJib2R5MlwiXG4gICAgICAgIGFsaWduPXttZXNzYWdlLnNlbGYgPyAncmlnaHQnIDogJ2xlZnQnfVxuICAgICAgICBjb2xvcj1cInRleHRTZWNvbmRhcnlcIlxuICAgICAgPlxuICAgICAgICB7ZGlzcERhdGU/LnRvTG9jYWxlVGltZVN0cmluZyhbXSwge1xuICAgICAgICAgIGhvdXI6ICcyLWRpZ2l0JyxcbiAgICAgICAgICBtaW51dGU6ICcyLWRpZ2l0JyxcbiAgICAgICAgfSl9XG4gICAgICA8L1R5cG9ncmFwaHk+XG4gICAgPC9Cb3g+XG4gICk7XG5cbiAgcmV0dXJuIChcbiAgICA8R3JvdyBpbj5cbiAgICAgIDxCb3hcbiAgICAgICAgaWQ9e2lkfVxuICAgICAgICBtYXhXaWR0aD1cIjEwMCVcIlxuICAgICAgICBmbGV4PVwiMCAxIGF1dG9cIlxuICAgICAgICBteT17MX1cbiAgICAgICAgcGw9e21lc3NhZ2Uuc2VsZiA/ICcyMCUnIDogMH1cbiAgICAgICAgcHI9e21lc3NhZ2Uuc2VsZiA/IDAgOiAnMjAlJ31cbiAgICAgICAgZGlzcGxheT1cImZsZXhcIlxuICAgICAgICBqdXN0aWZ5Q29udGVudD17bWVzc2FnZS5zZWxmID8gJ2ZsZXgtZW5kJyA6ICdmbGV4LXN0YXJ0J31cbiAgICAgICAgc3R5bGU9e3sgb3ZlcmZsb3dXcmFwOiAnYnJlYWstd29yZCcgfX1cbiAgICAgID5cbiAgICAgICAge21lc3NhZ2UuYXZhdGFyICYmICFtZXNzYWdlLnNlbGYgJiYgQ2hhdEF2YXRvcn1cbiAgICAgICAgPEJveCBtaW5XaWR0aD17MH0gZGlzcGxheT1cImZsZXhcIiBmbGV4RGlyZWN0aW9uPVwiY29sdW1uXCI+XG4gICAgICAgICAge21lc3NhZ2UudXNlcm5hbWUgJiYgQ2hhdFVzZXJuYW1lfVxuICAgICAgICAgIDxCb3hcbiAgICAgICAgICAgIG1heFdpZHRoPVwiMTAwJVwiXG4gICAgICAgICAgICBweT17MX1cbiAgICAgICAgICAgIHB4PXsyfVxuICAgICAgICAgICAgYmdjb2xvcj17bWVzc2FnZS5zZWxmID8gJ3ByaW1hcnkubWFpbicgOiAnYmFja2dyb3VuZC5wYXBlcid9XG4gICAgICAgICAgICBjb2xvcj17bWVzc2FnZS5zZWxmID8gJ3ByaW1hcnkuY29udHJhc3RUZXh0JyA6ICd0ZXh0LnByaW1hcnknfVxuICAgICAgICAgICAgYm9yZGVyUmFkaXVzPXsxNn1cbiAgICAgICAgICAgIGJveFNoYWRvdz17Mn1cbiAgICAgICAgICA+XG4gICAgICAgICAgICB7bWVzc2FnZS50eXBlID09PSAndGV4dCcgJiYgKFxuICAgICAgICAgICAgICA8VHlwb2dyYXBoeSB2YXJpYW50PVwiYm9keTFcIiBzdHlsZT17eyB3aGl0ZVNwYWNlOiAncHJlLXdyYXAnIH19PlxuICAgICAgICAgICAgICAgIHttZXNzYWdlLmNvbnRlbnR9XG4gICAgICAgICAgICAgIDwvVHlwb2dyYXBoeT5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgICB7bWVzc2FnZS50eXBlID09PSAndGV4dF9hdWRpbycgJiYgKFxuICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7ZmxleDogJzAgMSAwJScsIGRpc3BsYXk6ICdmbGV4JywgZmxleERpcmVjdGlvbjogJ3Jvdyd9fT5cbiAgICAgICAgICAgICAgICA8VHlwb2dyYXBoeVxuICAgICAgICAgICAgICAgICAgdmFyaWFudD1cImJvZHkxXCJcbiAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG92ZXJmbG93V3JhcDogJ2JyZWFrLXdvcmQnLCB3aGl0ZVNwYWNlOiAncHJlLXdyYXAnIH19PlxuICAgICAgICAgICAgICAgICAgICB7bWVzc2FnZS5jb250ZW50fVxuICAgICAgICAgICAgICAgIDwvVHlwb2dyYXBoeT5cbiAgICAgICAgICAgICAgICA8ZGl2IG9uQ2xpY2s9e3BsYXlTb3VuZENvbnRlbnR9PlxuICAgICAgICAgICAgICAgICAgPEF1ZGlvTWVzc2FnZUJ1dHRvbiB7Li4uYXVkaW9CdXR0b25Qcm9wc30vPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgICB7bWVzc2FnZS50eXBlID09PSAnanN4JyAmJiA8ZGl2PnttZXNzYWdlLmNvbnRlbnR9PC9kaXY+fVxuICAgICAgICAgIDwvQm94PlxuICAgICAgICAgIHtzaG93RGF0ZVRpbWUgJiYgQ2hhdERhdGV9XG4gICAgICAgIDwvQm94PlxuICAgICAgICB7bWVzc2FnZS5hdmF0YXIgJiYgbWVzc2FnZS5zZWxmICYmIENoYXRBdmF0b3J9XG4gICAgICA8L0JveD5cbiAgICA8L0dyb3c+XG4gICk7XG59XG4iXX0=